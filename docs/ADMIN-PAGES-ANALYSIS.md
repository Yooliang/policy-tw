# ç®¡ç†é é¢åŠŸèƒ½åˆ†æå ±å‘Š

## ç¾æœ‰ç®¡ç†é é¢

| é é¢ | è·¯ç”± | ä¸»è¦åŠŸèƒ½ |
|------|------|----------|
| AdminAI.vue | /admin/ai | AI å€™é¸äººæœå°‹ã€æ”¿è¦‹æ›´æ–°ã€ä»»å‹™æ­·å² |
| AdminDuplicates.vue | /admin/duplicates | é‡è¤‡æ”¿æ²»äººç‰©åµæ¸¬èˆ‡åˆä½µ |
| AdminImport.vue | /admin/import | Excel æª”æ¡ˆåŒ¯å…¥å€™é¸äºº |
| AdminScraper.vue | /admin/scraper | ä¸­é¸æœƒ API æŠ“å–å€™é¸äºº |

---

## è©³ç´°åŠŸèƒ½åˆ†æ

### 1. AdminAI.vue (AI ç®¡ç†)

**å››å€‹ Tabï¼š**

| Tab | åŠŸèƒ½ | èª¿ç”¨çš„ Edge Function |
|-----|------|---------------------|
| æœå°‹ | Claude AI æœå°‹å€™é¸äºº | ai-search, ai-prompt-status |
| æ›´æ–° | æ›´æ–°æ”¿è¦‹åŸ·è¡Œé€²åº¦ | ai-update-progress |
| æ­·å² | æŸ¥çœ‹éå¾€æœå°‹ä»»å‹™ | ç›´æ¥æŸ¥è©¢ ai_prompts |
| æ—¥èªŒ | æŸ¥çœ‹ AI ä½¿ç”¨ç´€éŒ„ | ç›´æ¥æŸ¥è©¢ ai_usage_logs |

**ç‰¹è‰²åŠŸèƒ½ï¼š**
- è‡ªå‹•æ‰¹æ¬¡æ¨¡å¼ï¼šä¸€éµæœå°‹ 22 ç¸£å¸‚
- è¼ªè©¢æ©Ÿåˆ¶ï¼š5ç§’é–“éš”ï¼Œ5åˆ†é˜è¶…æ™‚
- é€å€‹æˆ–æ‰¹é‡åŒ¯å…¥å€™é¸äºº

### 2. AdminDuplicates.vue (é‡è¤‡è³‡æ–™æ¸…ç†)

**åŠŸèƒ½ï¼š**
- åµæ¸¬åŒåæ”¿æ²»äººç‰©
- ä¸­é¸æœƒå®˜æ–¹è³‡æ–™æ ¸å°
- è‡ªå‹•åˆä½µé‡è¤‡é …

**èª¿ç”¨çš„ Edge Functionï¼š**
- fetch-cec-data
- merge-politicians
- update-politician

### 3. AdminImport.vue (Excel åŒ¯å…¥)

**åŠŸèƒ½ï¼š**
- è§£æä¸­é¸æœƒ Excel æª”æ¡ˆ
- é è¦½ä¸¦é¸æ“‡è¦åŒ¯å…¥çš„è³‡æ–™
- æ‰¹æ¬¡åŒ¯å…¥ï¼ˆ100ç­†/æ‰¹ï¼‰

**èª¿ç”¨çš„ Edge Functionï¼š**
- batch-import-candidates

### 4. AdminScraper.vue (ä¸­é¸æœƒæŠ“å–)

**åŠŸèƒ½ï¼š**
- ç›´æ¥å‘¼å«ä¸­é¸æœƒ API
- 22ç¸£å¸‚ Ã— 8é¸èˆ‰é¡å‹ çŸ©é™£æŠ“å–
- é¸èˆ‰å€å°æ‡‰è¡¨å»ºç«‹
- LocalStorage é€²åº¦æŒä¹…åŒ–

**èª¿ç”¨çš„ Edge Functionï¼š**
- add-politician

---

## ğŸ”´ åŠŸèƒ½é‡è¤‡å•é¡Œ

### å•é¡Œ 1: å€™é¸äººåŒ¯å…¥æœ‰ä¸‰ç¨®æ–¹å¼

| æ–¹å¼ | é é¢ | è³‡æ–™ä¾†æº | å„ªç¼ºé» |
|------|------|----------|--------|
| AI æœå°‹ | AdminAI | ç¶²è·¯æ–°è | å¯æ‰¾åˆ°æœªå®£å¸ƒçš„å€™é¸äººï¼Œä½†éœ€é©—è­‰ |
| Excel åŒ¯å…¥ | AdminImport | ä¸­é¸æœƒæª”æ¡ˆ | å®˜æ–¹è³‡æ–™ä½†éœ€æ‰‹å‹•ä¸‹è¼‰ |
| API æŠ“å– | AdminScraper | ä¸­é¸æœƒ API | è‡ªå‹•åŒ–ä½†åƒ…é™å·²ç™»è¨˜ |

**å»ºè­°ï¼š** çµ±ä¸€ç‚º API å„ªå…ˆï¼ŒAI è£œå……æœªç™»è¨˜äººé¸

### å•é¡Œ 2: ç„¡æ•ˆåç¨±éæ¿¾é‡è¤‡å¯¦ä½œ

AdminAI å’Œ AdminScraper éƒ½æœ‰ç›¸åŒçš„éæ¿¾é‚è¼¯ï¼š
```javascript
const invalidPatterns = ['æœªå®š', 'å¾…å®š', 'å¾…ç¢ºèª', 'å°šå¾…ç¢ºèª', 'æœªçŸ¥', 'äººé¸', 'å…¶ä»–', 'å¾…å…¬å¸ƒ']
```

**å»ºè­°ï¼š** æŠ½å–ç‚ºå…±ç”¨å·¥å…·å‡½æ•¸

### å•é¡Œ 3: é€²åº¦ç®¡ç†ä¸ä¸€è‡´

| é é¢ | é€²åº¦å„²å­˜æ–¹å¼ |
|------|-------------|
| AdminScraper | LocalStorageï¼ˆå¯çºŒæ¥ï¼‰ |
| AdminImport | è‡¨æ™‚ UI ç‹€æ…‹ï¼ˆé‡æ–°æ•´ç†ä¸Ÿå¤±ï¼‰ |
| AdminAI | ai_prompts è¡¨ï¼ˆæ°¸ä¹…ï¼‰ |

**å»ºè­°ï¼š** çµ±ä¸€ä½¿ç”¨ ai_prompts æˆ– LocalStorage

### å•é¡Œ 4: ä¸­é¸æœƒè³‡æ–™ä½¿ç”¨åˆ†æ•£

| é é¢ | ä¸­é¸æœƒè³‡æ–™ç”¨é€” |
|------|---------------|
| AdminDuplicates | é©—è­‰èº«ä»½ |
| AdminScraper | æŠ“å–å€™é¸äºº |
| AdminImport | è§£æçµæœæª” |

**å»ºè­°ï¼š** å»ºç«‹çµ±ä¸€çš„ä¸­é¸æœƒè³‡æ–™æœå‹™å±¤

---

## ğŸ“Š Edge Functions ä½¿ç”¨åˆ†å¸ƒ

```
ai-search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AdminAI
ai-prompt-status â”€â”€â”€â”€â”€â”€â–º AdminAI
ai-update-progress â”€â”€â”€â”€â–º AdminAI
import-candidate â”€â”€â”€â”€â”€â”€â–º AdminAI
batch-import-candidates â–º AdminImport
add-politician â”€â”€â”€â”€â”€â”€â”€â”€â–º AdminScraper
fetch-cec-data â”€â”€â”€â”€â”€â”€â”€â”€â–º AdminDuplicates
merge-politicians â”€â”€â”€â”€â”€â–º AdminDuplicates
update-politician â”€â”€â”€â”€â”€â–º AdminDuplicates
```

---

## ğŸ’¡ é‡æ§‹å»ºè­°

### å»ºè­° 1: çµ±ä¸€è³‡æ–™åŒ¯å…¥å…¥å£

å»ºç«‹ `AdminDataHub.vue`ï¼š
- Tab 1: è‡ªå‹•æŠ“å–ï¼ˆä¸­é¸æœƒ APIï¼‰
- Tab 2: AI æœå°‹ï¼ˆè£œå……æœªç™»è¨˜ï¼‰
- Tab 3: æ‰‹å‹•åŒ¯å…¥ï¼ˆExcelï¼‰
- Tab 4: è³‡æ–™é©—è­‰ï¼ˆé‡è¤‡/æ ¸å°ï¼‰

### å»ºè­° 2: å…±ç”¨å…ƒä»¶æŠ½å–

```
components/admin/
â”œâ”€â”€ CandidateTable.vue      # å€™é¸äººè¡¨æ ¼ï¼ˆå«é¸æ“‡ã€åŒ¯å…¥ï¼‰
â”œâ”€â”€ ProgressTracker.vue     # é€²åº¦è¿½è¹¤å…ƒä»¶
â”œâ”€â”€ TaskHistory.vue         # ä»»å‹™æ­·å²æ¸…å–®
â””â”€â”€ CecVerifier.vue         # ä¸­é¸æœƒè³‡æ–™é©—è­‰
```

### å»ºè­° 3: æœå‹™å±¤æŠ½å–

```typescript
// services/candidateService.ts
export const candidateService = {
  validateName(name: string): boolean
  importSingle(candidate: Candidate): Promise<Result>
  importBatch(candidates: Candidate[]): Promise<BatchResult>
  checkDuplicate(name: string, region: string): Promise<Politician[]>
}

// services/cecService.ts
export const cecService = {
  fetchCandidates(year: number, type: string, region: string): Promise<Candidate[]>
  fetchElectoralDistricts(year: number, region: string): Promise<District[]>
  verifyIdentity(name: string, birthYear: number): Promise<CecRecord>
}
```

---

## ç¾æœ‰ AI åŠŸèƒ½æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   AdminAI.vue   â”‚ VerifyContent   â”‚   (æœªä¾†) AIChat     â”‚
â”‚   (ç®¡ç†å“¡)      â”‚   (å…¬æ°‘é©—è­‰)     â”‚   (é€šç”¨å°è©±)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                   â”‚
         â–¼                 â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Supabase Edge Functions                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ai-search     â”‚   ai-verify     â”‚   ai-classify       â”‚
â”‚   (Claude)      â”‚   (Gemini)      â”‚   (æ–°å¢: åˆ†é¡)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                   â”‚
         â–¼                 â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ai_prompts è¡¨                          â”‚
â”‚   task_type: candidate_search | policy_search |          â”‚
â”‚              policy_verify | progress_tracking |         â”‚
â”‚              user_contribution (æ–°å¢)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‹ä¸€æ­¥è¡Œå‹•

1. âœ… å»ºç«‹è³‡æ–™åº«çµæ§‹æ–‡ä»¶
2. âœ… å»ºç«‹ç®¡ç†é é¢åˆ†ææ–‡ä»¶
3. â³ è¨­è¨ˆé€šç”¨ AI å°è©±é é¢
4. â³ è¨­è¨ˆä»»å‹™åˆ†é¡è·¯ç”±é‚è¼¯
5. â³ æ•´åˆç¾æœ‰æ¶æ§‹
